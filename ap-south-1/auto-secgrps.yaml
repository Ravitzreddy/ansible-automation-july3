---
  - hosts: localhost
    connection: local
    become: true
    tasks:
      - name: create webserver sec groups
        ec2_group:
          name: "{{item.0.secgrpname}}"
          description: "{{item.1.secgrpdesc}}"
          region: "{{item.1.secregion}}"
          vpc_id: "{{item.1.secvpcid}}"
          rules:
            - proto: tcp
              from_port: 80
              to_port: 80
              cidr_ip: 0.0.0.0/0
            - proto: tcp
              from_port: 22
              to_port: 22
              cidr_ip: 0.0.0.0/0
        register: webservers_group             
        with_subelements:
          - "{{create_webserver_sec_groups}}"
          - configurations  
